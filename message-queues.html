<!DOCTYPE html><html lang="en"><head><link rel="shortcut icon" href="/favicon.png"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/manifest.json"/><meta charSet="utf-8"/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta property="og:description" content="Yihui He, AI research scientist / full stack engineer"/><meta name="theme-color" content="#EB625A"/><meta property="og:type" content="website"/><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4253216309174736" crossorigin="anonymous"></script><meta property="og:title" content="Message Queues"/><meta property="og:site_name" content="Yihui He"/><meta name="twitter:title" content="Message Queues"/><meta property="twitter:domain" content="yihui-he.github.io"/><meta name="twitter:creator" content="@he_yi_hui"/><meta name="description" content="Yihui He, AI research scientist / full stack engineer"/><meta property="og:description" content="Yihui He, AI research scientist / full stack engineer"/><meta name="twitter:description" content="Yihui He, AI research scientist / full stack engineer"/><meta name="twitter:card" content="summary"/><link rel="canonical" href="https://yihui-he.github.io/message-queues"/><meta property="og:url" content="https://yihui-he.github.io/message-queues"/><meta property="twitter:url" content="https://yihui-he.github.io/message-queues"/><title>Message Queues</title><meta name="next-head-count" content="20"/><link rel="preload" href="/blog/_next/static/css/ce9b11b02642a9642d6d.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/ce9b11b02642a9642d6d.css" data-n-g=""/><link rel="preload" href="/blog/_next/static/css/4b67152b49ef8d389eef.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/4b67152b49ef8d389eef.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blog/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/blog/_next/static/chunks/webpack-ed2d627650adadaab635.js" defer=""></script><script src="/blog/_next/static/chunks/framework-c93ed74a065331c4bd75.js" defer=""></script><script src="/blog/_next/static/chunks/main-0989120ac94443065aa9.js" defer=""></script><script src="/blog/_next/static/chunks/pages/_app-93d47364a9b4c8c53030.js" defer=""></script><script src="/blog/_next/static/chunks/1bfc9850-762e4e08544c8bec659c.js" defer=""></script><script src="/blog/_next/static/chunks/ae51ba48-7f31b5cf321fe3268476.js" defer=""></script><script src="/blog/_next/static/chunks/d7eeaac4-07e2c37279f27c6f41bc.js" defer=""></script><script src="/blog/_next/static/chunks/808-8e92cc1e8e3a13c0ecab.js" defer=""></script><script src="/blog/_next/static/chunks/270-25d82ee694bd9ee7ef5a.js" defer=""></script><script src="/blog/_next/static/chunks/pages/%5BpageId%5D-845d25c09c3d16569292.js" defer=""></script><script src="/blog/_next/static/P2-vwnI2t92OYaXL16i4K/_buildManifest.js" defer=""></script><script src="/blog/_next/static/P2-vwnI2t92OYaXL16i4K/_ssgManifest.js" defer=""></script></head><body><script src="noflash.js"></script><div id="__next"><div class="notion notion-app light-mode notion-block-4318a0c05b8442f4aff19fc5a1e2244f"><div class="notion-viewport"></div><div class="notion-frame"><header class="notion-header"><div class="nav-header"><div class="breadcrumbs"><a class="breadcrumb" href="/blog"><img class="icon notion-page-icon" src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F63e89fe9-f5cd-4414-be0e-53d91aa54fc3%2Fme_small.jpg?table=block&amp;id=bd32b787-e471-49f3-8941-174a9c6846b6&amp;cache=v2" alt="Yihui He’s Blog" loading="lazy"/><span class="title">Yihui He’s Blog</span></a><span class="spacer">/</span><a class="breadcrumb" href="/blog/system-design"><span class="title">system design</span></a><span class="spacer">/</span><div class="breadcrumb active"><span class="title">Message Queues</span></div></div><div class="rhs"></div></div></header><div class="notion-page-scroller"><main class="notion-page notion-page-no-cover notion-page-no-icon notion-page-has-text-icon notion-full-page"><h1 class="notion-title"><b><b>Message Queues</b></b></h1><div class="notion-page-content notion-page-content-has-aside notion-page-content-has-toc"><article class="notion-page-content-inner"><blockquote class="notion-quote notion-block-1e560585011a4129b5fe573573991d8d">A message queue, as the name says, is a queue that routes messages from the source to the destination or the sender to the receiver following the FIFO (First in, first out) policy.</blockquote><div class="notion-text notion-block-ebc2826845874b88973726d95c1684a6">The message that is added to the queue first is delivered first. Besides FIFO, messages queues also support priority-based message delivery. Messages have a priority assigned to them and the queue processes the messages based on the priority set. These message queues are called priority queues.</div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-b3a67a77c28e46bd9cbe111d068a7e61" data-id="b3a67a77c28e46bd9cbe111d068a7e61"><span><div id="b3a67a77c28e46bd9cbe111d068a7e61" class="notion-header-anchor"></div><a class="notion-hash-link" href="#b3a67a77c28e46bd9cbe111d068a7e61" title="Features of a message queue"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title"><b>Features of a message queue</b></span></span></h3><div class="notion-text notion-block-caea4979b3304d6795e5fdbe7c9e5156">Message queues facilitate asynchronous behavior. We have already learned what asynchronous behavior is in the AJAX lesson. Asynchronous behavior allows the modules to communicate in the background without hindering their primary tasks.</div><div class="notion-text notion-block-b8dd45be03144fb2bdc68f998f7e174b">Message queues facilitate cross-module communication, which is key in service-oriented and microservices architecture. They enable communication in a heterogeneous environment, providing temporary storage for storing messages until they are processed and consumed by the consumer.</div><div class="notion-text notion-block-6509f7f899604b4e9cd21a598e8455b9">Let’s look at a real-world example to understand message queues.</div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-11043d002b114b5e8f123f5cd62884aa" data-id="11043d002b114b5e8f123f5cd62884aa"><span><div id="11043d002b114b5e8f123f5cd62884aa" class="notion-header-anchor"></div><a class="notion-hash-link" href="#11043d002b114b5e8f123f5cd62884aa" title="Real-world example of a message queue"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title"><b>Real-world example of a message queue</b></span></span></h3><div class="notion-text notion-block-edad8d006f3a437188877dcae9695134">Take an email service as an example. Both the sender and receiver of the email don’t have to be online at the same time to communicate with each other. The sender sends an email, and the message is temporarily stored on the message server until the recipient comes online and reads the message.</div><div class="notion-text notion-block-3303b049858846c2a178554b0fbe1b05">Message queues enable us to run background processes, tasks, and batch jobs. Speaking of background processes, let’s understand this better with the help of a use case.</div><div class="notion-text notion-block-17410510c0e64b32a7a855880722a674">Think of a user signing up on a portal. After they sign up, they are immediately allowed to navigate to the application’s homepage, but the sign-up process isn’t complete yet. The system has to send a confirmation email to the user’s registered email id. Then, the user has to click on the confirmation email to confirm the sign-up event.</div><div class="notion-text notion-block-6789d48cbedd4d24b8db14bcd74e9c1d">However, the website cannot keep the user waiting until it sends the email to the user. They are immediately allowed to navigate to the application’s home page to avert them from bouncing off.</div><div class="notion-text notion-block-1a6baa3d259246bfb6fc3613aaa0f002">So, the task of sending a sign-up confirmation email to the user is assigned as an asynchronous background process to a message queue. It sends an email while the user continues to browse the website.</div><div class="notion-text notion-block-a817aa1bd7824fb1b6089237e500c8cd">This is how message queues are leveraged to add asynchronous behavior to an application. Message queues are also used to implement notification systems similar to Facebook notifications. I’ll discuss this in the upcoming lessons.</div><div class="notion-text notion-block-8fac8140f6b54f89a0504eb092bc9b0e">Moving on to the batch jobs.</div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-b8740dfe63c64a568d33c151c19c49bf" data-id="b8740dfe63c64a568d33c151c19c49bf"><span><div id="b8740dfe63c64a568d33c151c19c49bf" class="notion-header-anchor"></div><a class="notion-hash-link" href="#b8740dfe63c64a568d33c151c19c49bf" title="Message queue in running batch jobs#"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title"><b>Message queue in running batch jobs</b><a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://www.educative.io/module/lesson/web-application-architecture-101/g2qWZ5MklPl#Message-queue-in-running-batch-jobs"><b>#</b></a></span></span></h3><div class="notion-text notion-block-0903d536224f48aeb2d435ce5a8c89a2">Do you remember the stock market game use case from the caching lesson where I discussed how I leveraged a cache to reduce application hosting costs?</div><div class="notion-text notion-block-3d4291c2a5a444378c9607ad0dd13697">The batch job, which updated the stock prices at regular intervals in the database, was run by a message queue.</div><div class="notion-text notion-block-3deabe62f787496b88dbcce68c617be2">So, we now know what a message queue is and why we use it in applications. In a message queue, there is a message sender called the producer, and there is a message receiver called the consumer.</div><div class="notion-text notion-block-aad2ff60a4dd4fb0b88a8f6e82ffca27">Both the producer and the consumer don’t have to reside on the same machine to communicate. This is pretty obvious.</div><div class="notion-text notion-block-7182084c17a447679758b828c62443b1">While routing messages through the queue, we can define several rules based on our business requirements. Adding priority to the messages is one that I pointed out. Other essential queuing features include message acknowledgments, retrying failed messages, etc.</div><div class="notion-text notion-block-127862fdec7e4f10873657e80b7b8c87">Speaking of the size of the queue, how big can it get, how many messages it can contain? Well, there is no definite size to it, and it can be an infinite buffer, considering the business has unlimited resources to run its infrastructure.</div><div class="notion-text notion-block-be296cdbf238441081922c33d942fc99">Now, let’s look into the messaging models widely used in the industry, beginning with the publish-subscribe message routing model, which is responsible for how we consume information at large.</div><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-9cee081650ff49648309386822e689c9" data-id="9cee081650ff49648309386822e689c9"><span><div id="9cee081650ff49648309386822e689c9" class="notion-header-anchor"></div><a class="notion-hash-link" href="#9cee081650ff49648309386822e689c9" title="Publish-Subscribe Model"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title"><b>Publish-Subscribe Model</b></span></span></h2><blockquote class="notion-quote notion-block-4a922ef6a24c429da4543bfdfdd6b4d3">A publish-subscribe model, aka pub-sub, is a model that enables a single or multiple producers to broadcast messages to multiple consumers.</blockquote><div class="notion-text notion-block-2e9619bd6abf4a698e04c3825e9853ca">A good analogy of this model is a newspaper service. Consumers subscribe to a newspaper service, and the service delivers the news to multiple consumers of its service every single day.</div><div class="notion-text notion-block-4e4e568b7e2746e9970861c0dbe95e03">In the online world, we often subscribe to various topics, such as sports, politics, economics, etc., in applications to be continually notified of the latest updates on that particular segment.</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-71a9dc5e4d284564b6f56fa7d1761a1a" data-id="71a9dc5e4d284564b6f56fa7d1761a1a"><span><div id="71a9dc5e4d284564b6f56fa7d1761a1a" class="notion-header-anchor"></div><a class="notion-hash-link" href="#71a9dc5e4d284564b6f56fa7d1761a1a" title="Exchanges"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title"><b>Exchanges</b></span></span></h3><div class="notion-text notion-block-782cf097cd254946a336cfa428502926">To implement the pub-sub pattern, message queues have exchanges that push the messages to the message queues based on the exchange type and the set rules. Exchanges here are just like telephone exchanges that route messages from the sender to the receiver through the infrastructure based on certain logic.</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-4e795428ceff445ebd7b7ec786f0ff3f"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Fs3.us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F4a4159b6-1af1-415f-993e-96f05df2b94d%2FUntitled.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DAKIAT73L2G45EIPT3X45%252F20220307%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20220307T063718Z%26X-Amz-Expires%3D86400%26X-Amz-Signature%3Dd446f4c68a2ace543dadd4e26460fd6daa658bf99faa08642fa8c78bbb8eeac4%26X-Amz-SignedHeaders%3Dhost%26x-id%3DGetObject?table=block&amp;id=4e795428-ceff-445e-bd7b-7ec786f0ff3f&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-d0ad2fd0b14b47ef92c2c0faf36067d0">There are different types of exchanges available in message queues, some of which are: <b>direct, topic, headers, and fanout</b>. Each exchange type has specific functionality and a use case.</div><div class="notion-text notion-block-8f4af032e56c4e728a77a4d53275a746">Different message queue technologies have different implementations of exchange types. I just brought up the commonly used exchange types in message queues.</div><div class="notion-text notion-block-dc102aeeedfe432193530e62d4840294">The <b>fanout exchange will fit best for implementing a pub-sub pattern. It will push the messages to the queue and the consumers will receive the message broadcast.</b> The relationship between the exchange and the queue is known as binding.</div><div class="notion-text notion-block-52a699260097461392f14298fed852b7">Message queues and publish-subscribe pattern are responsible for delivering real-time news, updates, notifications on social apps to the end-users. The end-users follow certain pages, and they start receiving updates on the content published by those pages continually.</div><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-b7bf824997ee4dc38412ba95742efa10" data-id="b7bf824997ee4dc38412ba95742efa10"><span><div id="b7bf824997ee4dc38412ba95742efa10" class="notion-header-anchor"></div><a class="notion-hash-link" href="#b7bf824997ee4dc38412ba95742efa10" title="Point-to-Point Model"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title"><b>Point-to-Point Model</b></span></span></h2><blockquote class="notion-quote notion-block-2079c0b025e84829ae0fd610dc483733">In a point-to-point model, a message from the producer is consumed by only one consumer.</blockquote><div class="notion-text notion-block-4b55c3ec63c3491586cbd22b6c8e5039">It’s like a one-to-one relationship, while a publish-subscribe model is a one-to-many relationship.</div><div class="notion-text notion-block-9fe6c496481f4c5aa2c1ff57270e959b">Though based on the business requirements, we can set up multiple combinations in this messaging model, including adding multiple producers and consumers to a queue. However, only one consumer will consume a message sent by the producer. This is why this model is called a point-to-point queuing model. It’s not a broadcast of messages rather an entity to entity communication.</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-eed9ef1cd9ae41b1bd229dae03bb39a3" data-id="eed9ef1cd9ae41b1bd229dae03bb39a3"><span><div id="eed9ef1cd9ae41b1bd229dae03bb39a3" class="notion-header-anchor"></div><a class="notion-hash-link" href="#eed9ef1cd9ae41b1bd229dae03bb39a3" title="Messaging protocols"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title"><b>Messaging protocols</b></span></span></h3><div class="notion-text notion-block-08e8921b02b14afcb730c3ff1105741b">There are two popular protocols when working with message queues: A<b>MQP Advanced Message Queue Protocol and STOMP Simple or Streaming Text Oriented Message Protocol.</b></div><div class="notion-text notion-block-74fd887618bc4c3c943a2a55b985ad8c">Since they are protocols, I won’t be delving into them further. Every messaging technology, RabbitMQ, ActiveMQ, Apache Kafka, will have its own implementations of these protocols.</div><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-93645deacf264ccbbf04c4962702e2d4" data-id="93645deacf264ccbbf04c4962702e2d4"><span><div id="93645deacf264ccbbf04c4962702e2d4" class="notion-header-anchor"></div><a class="notion-hash-link" href="#93645deacf264ccbbf04c4962702e2d4" title="Notification Systems and Real-Time Feeds with Message Queues"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title"><b>Notification Systems and Real-Time Feeds with Message Queues</b></span></span></h2><div class="notion-text notion-block-47478dc504694b2dad062f7f757b83c4">This is the part where you get an insight into how notification systems and real-time feeds are designed with the help of message queues.</div><div class="notion-text notion-block-327fedbdf1e9419a8fd2832625d69eb7">Folks! Notification systems and real-time feed are complex modules in today’s modern Web 2.0 applications. They involve a lot of tasks such as understanding user behavior, recommending new and relevant content to the users on the platform, ingesting data from different sources, matching user behaviour with that data, and so on. They also leverage machine learning in order to be more effective.</div><div class="notion-text notion-block-cef0f90f154044329da64c9722c47389">We won’t get into that level of complexity simply because it’s not required. I present a very simple use case to wrap our heads around it.</div><div class="notion-text notion-block-5dfefc34f4364823b3337db9a1354475">Also, as I discuss this use case, I need you to think how you would do it if you were to design such a notification system from the bare bones. This will help you understand the concept better.</div><div class="notion-text notion-block-93106a6e338e401e9b7dde5090580362">With that being said, let’s get on with it.</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-83caf2e0bada4326a0db3808a258ed95" data-id="83caf2e0bada4326a0db3808a258ed95"><span><div id="83caf2e0bada4326a0db3808a258ed95" class="notion-header-anchor"></div><a class="notion-hash-link" href="#83caf2e0bada4326a0db3808a258ed95" title="Notification system - use case"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title"><b>Notification system - use case</b></span></span></h3><div class="notion-text notion-block-d345bd5f1d1b477fb9821f8912464723">Imagine building a social network like Facebook using a relational database. A message queue is required to add asynchronous behavior to our application.</div><div class="notion-text notion-block-ab722e29801d495bafaae9e78f9e26f6">In the application, a user will have many friends and followers. This is a many-to-many relationship, like a social graph. One user has many friends, and they would be friends of many users.</div><div class="notion-text notion-block-3639af8695b6443f8de9f88c22246ca2">So, when a user creates a post on the website, the application will persist it in the database. There will be one User table and another Post table. Since one user will create many posts, it will be a one-to-many relationship between the user and their posts.</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-e633ac085e14462eb583561a4a01b4ab"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Fs3.us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F2eff034e-2de6-4592-8b1b-a499d7e96453%2FUntitled.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DAKIAT73L2G45EIPT3X45%252F20220307%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20220307T063718Z%26X-Amz-Expires%3D86400%26X-Amz-Signature%3D1506976675ed03d5e14271315c60c61e2857afd576f6bd83a5c5642fb32a398b%26X-Amz-SignedHeaders%3Dhost%26x-id%3DGetObject?table=block&amp;id=e633ac08-5e14-462e-b583-561a4a01b4ab&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-5b7cf2af7eb84361a49cb97298200db2">As we persist the post in the database, we also have to show the information posted by the user on the home page of their friends and followers, even send notifications if needed.</div><div class="notion-text notion-block-649eb99bb2b84c8fa905fa6344dc421e">How would you implement this? Pause and think before you read further.</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-0fe4143eed844205a3194a7ea5648df0" data-id="0fe4143eed844205a3194a7ea5648df0"><span><div id="0fe4143eed844205a3194a7ea5648df0" class="notion-header-anchor"></div><a class="notion-hash-link" href="#0fe4143eed844205a3194a7ea5648df0" title="Pull-based approach"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title"><b>Pull-based approach</b></span></span></h3><div class="notion-text notion-block-faf7a621ee3e47c98d6c8e746ff687c3">One straightforward way to implement this without the message queue will be to have every user on the website <b>poll the database at regular short intervals</b> if any of their connections have a new update.</div><div class="notion-text notion-block-edf6769d22fc48c6a33830f2af8ada88">For this, for showing notifications on a certain user profile, we will query all the connections of the user from the database and then run a check on every connection one by one if any new information is posted by them.</div><div class="notion-text notion-block-6394c425096040ffa5e4e3dc1761b16a">If there are new posts created by the user’s connections, the query will pull them all and display the posts on the home page of the user’s profile. We can also send the notifications to the user about the new posts, tracking them with the help of a boolean notification counter column in the User table and adding an extra AJAX poll query from the client for new notifications.</div><div class="notion-text notion-block-c63f509acaa945828cac3af4c38ef3e8">Whenever the database query finds new posts, it changes the new notification counter to true. When the counter is true, responding to the Ajax poll request, the application sends a notification to the user that you have recent posts made by your connections.</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-f6a200406aaf431baeffdf12dc363dfb"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Fs3.us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F05b2e096-9b9d-4767-b749-ca60fe7ef9d3%2FUntitled.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DAKIAT73L2G45EIPT3X45%252F20220307%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20220307T063718Z%26X-Amz-Expires%3D86400%26X-Amz-Signature%3Deeb340373ccc64e565d21bd108bce377375346e6235e666e8e11cdef059b08d9%26X-Amz-SignedHeaders%3Dhost%26x-id%3DGetObject?table=block&amp;id=f6a20040-6aaf-431b-aeff-df12dc363dfb&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-63d12766379f427dba1f7c72ea4e1704">What do you think of this approach? It’s pretty straightforward, right?</div><div class="notion-text notion-block-a00a65b2e2724143a231bf40874c3e24">Well, there are two major downsides to this approach.</div><div class="notion-text notion-block-3670145fe4c848bdbd64303d69057343">First, we are polling the database so often. This is expensive. It will c<b>onsume a lot of bandwidth and put a lot of unnecessary load on the database</b>.</div><div class="notion-text notion-block-0b99f06403654eb884c7fef89561a2b0">The second downside is that a user’s post displayed on the home page of their connection’s homepage will <b>not be in real-time</b>. The posts won’t show until the database is polled. We may assume this as real-time, but it is not really real-time.</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-1947b7b7fd894b688a0afd8f906a81f2" data-id="1947b7b7fd894b688a0afd8f906a81f2"><span><div id="1947b7b7fd894b688a0afd8f906a81f2" class="notion-header-anchor"></div><a class="notion-hash-link" href="#1947b7b7fd894b688a0afd8f906a81f2" title="Push-based approach"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title"><b>Push-based approach</b></span></span></h3><div class="notion-text notion-block-bbb9b434591a4cb38bf7f9a3f6fa0bdf">Let’s make our system more performant. Instead of polling the database now and then, we will take the help of a message queue.</div><div class="notion-text notion-block-6504ab156f65495a974be5ab245658e0">In this scenario, when a user creates a new post, it will have a distributed transaction. One transaction will update the database, and the other will send the post payload to the message queue. Payload means the content of the message posted by the user.</div><div class="notion-text notion-block-f9d3ec95a2ad4d9bac5ca8fa45ac548d">Notification systems and real-time feeds establish a persistent connection with the database to facilitate streaming data in real-time. We have already been through this.</div><div class="notion-text notion-block-50dbe57ed8cb4e8f9dffc29c125efe63">On receiving the message, the <b>message queue will asynchronously and immediately push the post to the user’s connections that are online</b>. There is no need for them to poll the database regularly to check if any of their connections have created a post.</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-e3349772ba6a4e11bd222ae7be5dc81a"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Fs3.us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F102f1ba9-b1cb-4bc1-a5e1-60458b9ea9ef%2FUntitled.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DAKIAT73L2G45EIPT3X45%252F20220307%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20220307T063718Z%26X-Amz-Expires%3D86400%26X-Amz-Signature%3Dcc4299c27fe53376218b7104d9452a1fff58a838967bc94c518b0be5db0dcfdc%26X-Amz-SignedHeaders%3Dhost%26x-id%3DGetObject?table=block&amp;id=e3349772-ba6a-4e11-bd22-2ae7be5dc81a&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-8919c4aa14bc48e9887d415945e520ba">We can also use the message queue temporary storage with a TTL for storing the payload until the connections of the user come online and then push the updates to them. We can also have a separate key-value database to store the user’s details required to push the notifications to their connections, like their connection list and stuff. This would avert the need to poll the database to get the connections of the user every time the user creates a post.</div><div class="notion-text notion-block-24af6dff1cf54b37a6e877ddc5b7fffe">So, did you see how we transitioned from a pull-based approach to a push-based approach with the help of message queues? This shift will spike the application’s performance and cut down a lot of resource consumption, saving truckloads of our hard-earned money.</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-a7c8873873f9470ab4ee703e36c6762d"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><img style="object-fit:contain" src="https://www.notion.so/image/https%3A%2F%2Fs3.us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F3bb2dee6-0694-42cb-bead-e3cb36b2854d%2FUntitled.png%3FX-Amz-Algorithm%3DAWS4-HMAC-SHA256%26X-Amz-Content-Sha256%3DUNSIGNED-PAYLOAD%26X-Amz-Credential%3DAKIAT73L2G45EIPT3X45%252F20220307%252Fus-west-2%252Fs3%252Faws4_request%26X-Amz-Date%3D20220307T063718Z%26X-Amz-Expires%3D86400%26X-Amz-Signature%3Da9e38024c7680e06db4017fab02771610e856b15cef9b9ef2a438446e7c961b0%26X-Amz-SignedHeaders%3Dhost%26x-id%3DGetObject?table=block&amp;id=a7c88738-73f9-470a-b4ee-703e36c6762d&amp;cache=v2" loading="lazy" alt="notion image" decoding="async"/></div></figure><div class="notion-text notion-block-e8c4f128f11c40aaa0a75a7e7e137848">There are several ways we can handle distributed transactions. Though the transactions are distributed, they can still work as a single unit. In case the database persistence fails, the application will roll back the entire transaction. There won’t be any message push to the message queue either.</div><div class="notion-text notion-block-e14d9e8769ba4437b25bc27c688c4d48">What if the message queue push fails? And the database transaction succeeds? Do you want to roll back the transaction, or do you want to proceed? The decision depends entirely on you, how you want your system to behave.</div><div class="notion-text notion-block-edc840ad555c46b99eaf7258ad5d9507">Even if the message queue push fails, the message isn’t lost. It can still be persisted in the database.</div><div class="notion-text notion-block-b88b154076b54eefb127ef26213dd32b"><b>When the user refreshes their homepage, you can write a query to poll the database for the new updates, taking the polling approach we discussed initially as a backup.</b></div><div class="notion-text notion-block-d3af290cb36c480e8fb620a80e15e5e0"><b>Or you can totally roll back the transaction, even if the database persistence transaction is a success but the message queue push transaction fails.</b> The post hasn’t gone into the database yet as it is generally a two-phase commit.</div><div class="notion-text notion-block-c87fc7d915ff4e1b8b763c5bfb0a2ca2">We can always write custom code to manage the distributed transactions or can choose to leverage the distributed transaction managers that the frameworks offer.</div><div class="notion-text notion-block-86ce82175e7f446bbf5cf46ef7b81848">I can keep going on to the minutest of the details, but that would just make the lesson unnecessarily lengthy, complex and overkill. For now, I have just touched the surface of notification modules to help you understand how they work.</div><div class="notion-text notion-block-76da0a8959e04fbb973d4d03ff0022cb">Post creation is an event that a user triggers in the application. Similar events are liking a post, photo, video, watching a live-stream and so on.</div><div class="notion-text notion-block-068576f4d29d4b2aa0c06d5f49a389ed">Just like posts, message queues can push these events too to the connections of a user.</div><div class="notion-text notion-block-57f1bceba96743ef8ce911c4ead1dcf3">When designing systems, I want to emphasize that there is no perfect or best solution. The solution should serve us well, fulfilling our business requirements and simultaneously maintaining costs. Application maintenance and optimization are evolutionary, don’t sweat about it in the initial development cycles.</div><div class="notion-text notion-block-e698e60dbb3646568924a5e1ef2e4488">First, get the skeleton in place and then optimize notch by notch.</div><div class="notion-text notion-block-4d08d027b2444286b7e07bf568bba7f3"><b>Recommended read</b> - <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://www.scaleyourapp.com/linkedin-real-time-architecture-how-does-linkedin-identify-its-users-online/">How does LinkedIn identify its users online?</a></div><h2 class="notion-h notion-h1 notion-h-indent-0 notion-block-c300023a704349f48030d1cabd83adfa" data-id="c300023a704349f48030d1cabd83adfa"><span><div id="c300023a704349f48030d1cabd83adfa" class="notion-header-anchor"></div><a class="notion-hash-link" href="#c300023a704349f48030d1cabd83adfa" title="Handling Concurrent Requests with Message Queues"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title"><b>Handling Concurrent Requests with Message Queues</b></span></span></h2><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-7ddbc1247688443ba2529be28ebdf805" data-id="7ddbc1247688443ba2529be28ebdf805"><span><div id="7ddbc1247688443ba2529be28ebdf805" class="notion-header-anchor"></div><a class="notion-hash-link" href="#7ddbc1247688443ba2529be28ebdf805" title="Using a message queue to handle the traffic surge"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title"><b>Using a message queue to handle the traffic surge</b></span></span></h3><div class="notion-text notion-block-e1563536909b45b6844be8ce1ee91722">In the distributed NoSQL databases lesson, we learned about eventual consistency and strong consistency. We discussed how both the consistency models come into effect when incrementing a “Like” counter value.</div><div class="notion-text notion-block-883712b7e99a4e26b402cc2084ed5526">Here is a quick insight into how we can use a message queue to manage a high number of concurrent requests to update an entity.</div><div class="notion-text notion-block-7f87f0bae57e40ddb2b71f8da42d5745"><b>When millions of users around the world update an entity concurrently, we can queue all the update requests in a high throughput message queue. Then, we can process them one by one in a First in First Out (FIFO) approach sequentially.</b></div><div class="notion-text notion-block-13b1319486d9452d86f99aaa5f0ade38">This would enable the system to be highly available and open to updates while remaining consistent at the same time.</div><div class="notion-text notion-block-262e17b910384e3e939c7429b2bd575b">Though implementing this approach is not as simple as it sounds, implementing anything in a distributed, real-time environment is not so trivial.</div><h3 class="notion-h notion-h2 notion-h-indent-1 notion-block-5887051d01db495b9a84542d9d6ab9df" data-id="5887051d01db495b9a84542d9d6ab9df"><span><div id="5887051d01db495b9a84542d9d6ab9df" class="notion-header-anchor"></div><a class="notion-hash-link" href="#5887051d01db495b9a84542d9d6ab9df" title="Facebook handles concurrent requests on its live video streaming service with a message queue"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title"><b>Facebook handles concurrent requests on its live video streaming service with a message queue</b></span></span></h3><div class="notion-text notion-block-975c45335f7947e6a32c808783e34b5f">Facebook’s approach of handling concurrent user requests on its LIVE video streaming service is another good example of how queues can be used to efficiently handle the traffic surge.</div><div class="notion-text notion-block-2641aabd8cfa4ca39c2613a3ce78a358">On the platform, when a popular person goes LIVE, there is a surge of user requests on the LIVE streaming server. To avert the incoming load on the server, Facebook uses cache to intercept the traffic.</div><div class="notion-text notion-block-c586ed878a9a4ef6a87525a34aa65c8e">However, since the data is streamed LIVE, the cache often is not populated with real-time data before the requests arrive. Now, this would naturally result in a cache-miss, and the requests would move on to hit the streaming server.</div><div class="notion-text notion-block-bef01f600d9d4e29bf2f12a494423f61">To avert this, <b>Facebook queues all the user requests, requesting the same data. It fetches the data from the streaming server, populates the cache, and then serves the queued requests from the cache.</b></div><div class="notion-text notion-block-eea0c4e08053402697997afa4a06ac95">Here is a recommended read on <a target="_blank" rel="noopener noreferrer" class="notion-link" href="https://engineering.fb.com/2015/12/03/ios/under-the-hood-broadcasting-live-video-to-millions/">Facebook’s Live streaming architecture</a>.</div><div class="notion-blank notion-block-678fafab8468410fb299199c869c642a"> </div></article><aside class="notion-aside"><div class="notion-aside-table-of-contents"><div class="notion-aside-table-of-contents-header">Table of Contents</div><nav class="notion-table-of-contents notion-gray"><a href="#b3a67a77c28e46bd9cbe111d068a7e61" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-0"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">Features of a message queue</span></a><a href="#11043d002b114b5e8f123f5cd62884aa" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-0"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">Real-world example of a message queue</span></a><a href="#b8740dfe63c64a568d33c151c19c49bf" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-0"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">Message queue in running batch jobs#</span></a><a href="#9cee081650ff49648309386822e689c9" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-0"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">Publish-Subscribe Model</span></a><a href="#71a9dc5e4d284564b6f56fa7d1761a1a" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">Exchanges</span></a><a href="#b7bf824997ee4dc38412ba95742efa10" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-0"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">Point-to-Point Model</span></a><a href="#eed9ef1cd9ae41b1bd229dae03bb39a3" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">Messaging protocols</span></a><a href="#93645deacf264ccbbf04c4962702e2d4" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-0"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">Notification Systems and Real-Time Feeds with Message Queues</span></a><a href="#83caf2e0bada4326a0db3808a258ed95" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">Notification system - use case</span></a><a href="#0fe4143eed844205a3194a7ea5648df0" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">Pull-based approach</span></a><a href="#1947b7b7fd894b688a0afd8f906a81f2" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">Push-based approach</span></a><a href="#c300023a704349f48030d1cabd83adfa" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-0"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">Handling Concurrent Requests with Message Queues</span></a><a href="#7ddbc1247688443ba2529be28ebdf805" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">Using a message queue to handle the traffic surge</span></a><a href="#5887051d01db495b9a84542d9d6ab9df" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">Facebook handles concurrent requests on its live video streaming service with a message queue</span></a></nav></div><div class="PageSocial_pageSocial__2WqHl"><a class="PageSocial_action__2zgVt PageSocial_twitter__-BgFt" href="https://yihui-he.github.io" title="personal website" target="_blank" rel="noopener noreferrer"><div class="PageSocial_actionBg__3CigO"><div class="PageSocial_actionBgPane__gbBkL"></div></div><div class="PageSocial_actionBg__3CigO"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg></div></a><a class="PageSocial_action__2zgVt PageSocial_twitter__-BgFt" href="https://twitter.com/he_yi_hui" title="Twitter @he_yi_hui" target="_blank" rel="noopener noreferrer"><div class="PageSocial_actionBg__3CigO"><div class="PageSocial_actionBgPane__gbBkL"></div></div><div class="PageSocial_actionBg__3CigO"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"></path></svg></div></a><a class="PageSocial_action__2zgVt PageSocial_github__slQ0z" href="https://github.com/yihui-he" title="GitHub @yihui-he" target="_blank" rel="noopener noreferrer"><div class="PageSocial_actionBg__3CigO"><div class="PageSocial_actionBgPane__gbBkL"></div></div><div class="PageSocial_actionBg__3CigO"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></div></a><a class="PageSocial_action__2zgVt PageSocial_linkedin__nElHT" href="https://www.linkedin.com/in/yihui-he-a4257aab" title="LinkedIn Yihui He" target="_blank" rel="noopener noreferrer"><div class="PageSocial_actionBg__3CigO"><div class="PageSocial_actionBgPane__gbBkL"></div></div><div class="PageSocial_actionBg__3CigO"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"></path></svg></div></a></div></aside></div></main><footer class="styles_footer__1r_c6"><div class="styles_copyright__3kWHj">Copyright 2022 <!-- -->Yihui He</div><div class="styles_social__235gY"><a class="styles_twitter__WwfaA" href="https://yihui-he.github.io" title="Twitter @he_yi_hui" target="_blank" rel="noopener noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 576 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"></path></svg></a><a class="styles_twitter__WwfaA" href="https://twitter.com/he_yi_hui" title="Twitter @he_yi_hui" target="_blank" rel="noopener noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><a class="styles_github__32xIr" href="https://github.com/yihui-he" title="GitHub @yihui-he" target="_blank" rel="noopener noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a class="styles_linkedin__1XGvB" href="https://www.linkedin.com/in/yihui-he-a4257aab" title="LinkedIn Yihui He" target="_blank" rel="noopener noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></div></footer></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"site":{"domain":"yihui-he.github.io","name":"Yihui He","rootNotionPageId":"bd32b787e47149f38941174a9c6846b6","rootNotionSpaceId":null,"description":"Yihui He, AI research scientist / full stack engineer"},"recordMap":{"block":{"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f":{"role":"reader","value":{"id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","version":163,"type":"page","properties":{"title":[["Message Queues",[["b"],["b"]]]]},"content":["1e560585-011a-4129-b5fe-573573991d8d","ebc28268-4587-4b88-9737-26d95c1684a6","b3a67a77-c28e-46bd-9cbe-111d068a7e61","caea4979-b330-4d67-95e5-fdbe7c9e5156","b8dd45be-0314-4fb2-bdc6-8f998f7e174b","6509f7f8-9960-4b4e-9cd2-1a598e8455b9","11043d00-2b11-4b5e-8f12-3f5cd62884aa","edad8d00-6f3a-4371-8887-7dcae9695134","3303b049-8588-46c2-a178-554b0fbe1b05","17410510-c0e6-4b32-a7a8-55880722a674","6789d48c-bedd-4d24-b8db-14bcd74e9c1d","1a6baa3d-2592-46bf-b6fc-3613aaa0f002","a817aa1b-d782-4fb1-b608-9237e500c8cd","8fac8140-f6b5-4f89-a050-4eb092bc9b0e","b8740dfe-63c6-4a56-8d33-c151c19c49bf","0903d536-224f-48ae-b2d4-35ce5a8c89a2","3d4291c2-a5a4-4437-8c96-07ad0dd13697","3deabe62-f787-496b-88db-cce68c617be2","aad2ff60-a4dd-4fb0-b88a-8f6e82ffca27","7182084c-17a4-4767-9758-b828c62443b1","127862fd-ec7e-4f10-8736-57e80b7b8c87","be296cdb-f238-4410-8192-2c33d942fc99","9cee0816-50ff-4964-8309-386822e689c9","4a922ef6-a24c-429d-a454-3bfdfdd6b4d3","2e9619bd-6abf-4a69-8e04-c3825e9853ca","4e4e568b-7e27-46e9-9708-61c0dbe95e03","71a9dc5e-4d28-4564-b6f5-6fa7d1761a1a","782cf097-cd25-4946-a336-cfa428502926","4e795428-ceff-445e-bd7b-7ec786f0ff3f","d0ad2fd0-b14b-47ef-92c2-c0faf36067d0","8f4af032-e56c-4e72-8a77-a4d53275a746","dc102aee-edfe-4321-9353-0e62d4840294","52a69926-0097-4613-92f1-4298fed852b7","b7bf8249-97ee-4dc3-8412-ba95742efa10","2079c0b0-25e8-4829-ae0f-d610dc483733","4b55c3ec-63c3-4915-86cb-d22b6c8e5039","9fe6c496-481f-4c5a-a2c1-ff57270e959b","eed9ef1c-d9ae-41b1-bd22-9dae03bb39a3","08e8921b-02b1-4afc-b730-c3ff1105741b","74fd8876-18bc-4c3c-943a-2a55b985ad8c","93645dea-cf26-4ccb-bf04-c4962702e2d4","47478dc5-0469-4b2d-ad06-2f7f757b83c4","327fedbd-f1e9-419a-8fd2-832625d69eb7","cef0f90f-1540-4432-9da6-4c9722c47389","5dfefc34-f436-4823-b333-7db9a1354475","93106a6e-338e-401e-9b7d-de5090580362","83caf2e0-bada-4326-a0db-3808a258ed95","d345bd5f-1d1b-477f-b982-1f8912464723","ab722e29-801d-495b-afaa-e9e78f9e26f6","3639af86-95b6-443f-8de9-f88c22246ca2","e633ac08-5e14-462e-b583-561a4a01b4ab","5b7cf2af-7eb8-4361-a49c-b97298200db2","649eb99b-b2b8-4c8f-a905-fa6344dc421e","0fe4143e-ed84-4205-a319-4a7ea5648df0","faf7a621-ee3e-47c9-8d6c-8e746ff687c3","edf6769d-22fc-48c6-a338-30f2af8ada88","6394c425-0960-40ff-a5e4-e3dc1761b16a","c63f509a-caa9-4582-8cac-3af4c38ef3e8","f6a20040-6aaf-431b-aeff-df12dc363dfb","63d12766-379f-427d-ba1f-7c72ea4e1704","a00a65b2-e272-4143-a231-bf40874c3e24","3670145f-e4c8-48bd-bd64-303d69057343","0b99f064-0365-4eb8-84c7-fef89561a2b0","1947b7b7-fd89-4b68-8a0a-fd8f906a81f2","bbb9b434-591a-4cb3-8bf7-f9a3f6fa0bdf","6504ab15-6f65-495a-974b-e5ab245658e0","f9d3ec95-a2ad-4d9b-ac5c-a8fa45ac548d","50dbe57e-d8cb-4e8f-9dff-c29c125efe63","e3349772-ba6a-4e11-bd22-2ae7be5dc81a","8919c4aa-14bc-48e9-887d-415945e520ba","24af6dff-1cf5-4b37-a6e8-77ddc5b7fffe","a7c88738-73f9-470a-b4ee-703e36c6762d","e8c4f128-f11c-40aa-a0a7-5a7e7e137848","e14d9e87-69ba-4437-b25b-c27c688c4d48","edc840ad-555c-46b9-9eaf-7258ad5d9507","b88b1540-76b5-4eef-b127-ef26213dd32b","d3af290c-b36c-480e-8fb6-20a80e15e5e0","c87fc7d9-15ff-4e1b-8b76-3c5bfb0a2ca2","86ce8217-5e7f-446b-bf5c-f46ef7b81848","76da0a89-59e0-4fbb-973d-4d03ff0022cb","068576f4-d29d-4b2a-a0c0-6d5f49a389ed","57f1bceb-a967-43ef-8ce9-11c4ead1dcf3","e698e60d-bb36-4656-8924-a5e1ef2e4488","4d08d027-b244-4286-b7e0-7bf568bba7f3","c300023a-7043-49f4-8030-d1cabd83adfa","7ddbc124-7688-443b-a252-9be28ebdf805","e1563536-909b-45b6-844b-e8ce1ee91722","883712b7-e99a-4e26-b402-cc2084ed5526","7f87f0ba-e57e-40dd-b2b7-1f8da42d5745","13b13194-86d9-452d-86f9-9aaa5f0ade38","262e17b9-1038-4e3e-939c-7429b2bd575b","5887051d-01db-495b-9a84-542d9d6ab9df","975c4533-5f79-47e6-a32c-808783e34b5f","2641aabd-8cfa-4ca3-9c26-13a3ce78a358","c586ed87-8a9a-4ef6-a875-25a34aa65c8e","bef01f60-0d9d-4e29-bf2f-12a494423f61","eea0c4e0-8053-4026-9799-7afa4a06ac95","678fafab-8468-410f-b299-199c869c642a"],"created_time":1646296140000,"last_edited_time":1646297400000,"parent_id":"07cdf7d1-24c9-4fd7-abc0-e1f79f38aafd","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"07cdf7d1-24c9-4fd7-abc0-e1f79f38aafd":{"role":"reader","value":{"id":"07cdf7d1-24c9-4fd7-abc0-e1f79f38aafd","version":339,"type":"page","properties":{"title":[["system design"]]},"content":["2e6b7a34-f307-48b0-85ed-876dcb93f619","adedba91-644d-44d9-ac88-2958a64ccd71","c13124a7-35a9-42fd-8dec-6f3c612806b0","d61b2037-f5b8-4b22-97bc-5723e9f69a1d","4f453c3a-1373-4a70-86c2-d7b576e98e5e","0df72a63-7d2c-4e28-8b21-e08ebccb55a2","f8a3ee44-0b64-4195-b0ba-f24bab3e1e4f","e84fe4d1-371e-41ce-ade8-7ca12e49a573","9e8e5448-75a5-4018-afed-9bd4e60fa391","11474a4e-33f8-4065-a29b-861a24ac3f40","a7391e70-aefa-4e1d-bc3a-ec3de2ac707b","4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","f2680711-07ac-43f8-b117-24a7fb9d54bb","0c6def08-b8e4-41a4-971e-af740e2b6f4d","497bb0b5-33c7-4f21-9d57-9a56f97205cc","5195ab6f-c195-4ede-a54d-461ec1e89a53","844cb897-b79c-468a-b2be-cbebc4e0e362"],"permissions":[{"role":"editor","type":"user_permission","user_id":"9e9c4442-4350-473a-b900-c954b0bd7a95"}],"created_time":1645489980000,"last_edited_time":1646618580000,"parent_id":"bd32b787-e471-49f3-8941-174a9c6846b6","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"bd32b787-e471-49f3-8941-174a9c6846b6":{"role":"reader","value":{"id":"bd32b787-e471-49f3-8941-174a9c6846b6","version":288,"type":"page","properties":{"title":[["Yihui He’s Blog"]]},"content":["cc62526f-e4eb-42e5-8e8f-a22c3abd7b46","eb534ff0-d0e6-4c83-b817-92c761ad9034","07cdf7d1-24c9-4fd7-abc0-e1f79f38aafd","41249f3f-76a2-458a-b13d-2bc06310337b","09ac442d-d3b5-4f43-9531-90cdae7640b7","76f263cc-0736-4657-91dd-551b1c541b4c","fad54c70-af5c-42a3-a00a-ff18bea9c382","9abe926f-8b36-4a60-a77e-e5436690a8c0","84c674a7-bbe3-4ac5-88c7-68e0c3909585","09517098-a843-437e-bb7a-4ac67866b29b","e7a12f56-b48c-43bf-803e-96d70518685f","932f5707-ab83-4542-af11-68fec7b5f28d","e6311219-0ef8-4142-8a3f-eeedc910dd3b","5f16dda4-316e-43af-a4ea-8fc6d6938404","23859d82-2201-4bb6-a86a-db693ea4992a","d5a94597-8cb4-43be-a6d0-0840b5518710","c54caf49-d28c-46ac-b72d-fc9bfa58bbdd","4751172a-1cb9-4633-84d6-21ba334ee3d7","8e23ed11-04f5-48ab-a95d-1f47a5cd22af","4b2fb8ba-1e4c-47ff-903b-0869360db746","010faf71-b9e5-4c47-832a-658dafc6e7ae","3db8e8fd-7383-4aea-8beb-608282db050e","60ff1c6d-fde5-426d-ac57-7bba2a5296a2","31008559-3d6f-4c33-bb50-4e463c9b19fb","201efca9-ba21-47c3-8b0d-35b41dd3f91f","04ced6eb-ca82-46db-8f8e-077f3bf6b29c","daf31581-086b-4fb1-9695-5a79117d4300","a0487f2c-eed0-4154-a6e8-2366ca1d7939","95728d67-dc1f-4086-881b-1cd1bf72f985","cba2b20a-aa13-466c-bcb6-a9f9c9f057da","5e0b979d-ef00-44a3-894f-38d28cfd7576","38a364d6-720a-4788-aeee-c2b224745860","6a838606-233d-4584-b2f1-3d198b1603e8","f93f1e88-d826-4cd3-ab2a-cd92ddd2ac53","e8156bf2-5303-4590-a44a-6db1404c8c7b","2411768d-af34-4f88-8772-c46ca4428256","52357a78-3241-4a0a-bcb7-46bfd15070a4","3f4c64fb-75dc-4ccd-9e22-ce5704d0dfdb","d1ef1d4d-bfa8-40c4-a78c-037da96f3681","8d0bc47c-6aaf-4ac2-ae09-a6830f9ad50c","8f822963-88c4-4e82-8eac-8d0f8b606895"],"discussions":["a13be18e-5008-4f8c-b07a-0fadb99d7450"],"format":{"page_icon":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/63e89fe9-f5cd-4414-be0e-53d91aa54fc3/me_small.jpg"},"permissions":[{"role":"editor","type":"user_permission","user_id":"9e9c4442-4350-473a-b900-c954b0bd7a95"},{"role":"reader","type":"public_permission","added_timestamp":1645466303668}],"created_time":1645422720000,"last_edited_time":1646526240000,"parent_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1","parent_table":"space","alive":true,"file_ids":["e3d85759-49f2-40d2-ba30-d25ca401872e","cfc564cc-91ae-4a96-a912-fcc9a28ec5db","63e89fe9-f5cd-4414-be0e-53d91aa54fc3"],"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"1e560585-011a-4129-b5fe-573573991d8d":{"role":"reader","value":{"id":"1e560585-011a-4129-b5fe-573573991d8d","version":2,"type":"quote","properties":{"title":[["A message queue, as the name says, is a queue that routes messages from the source to the destination or the sender to the receiver following the FIFO (First in, first out) policy."]]},"created_time":1646296184865,"last_edited_time":1646296140000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"ebc28268-4587-4b88-9737-26d95c1684a6":{"role":"reader","value":{"id":"ebc28268-4587-4b88-9737-26d95c1684a6","version":2,"type":"text","properties":{"title":[["The message that is added to the queue first is delivered first. Besides FIFO, messages queues also support priority-based message delivery. Messages have a priority assigned to them and the queue processes the messages based on the priority set. These message queues are called priority queues."]]},"created_time":1646296184865,"last_edited_time":1646296140000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"b3a67a77-c28e-46bd-9cbe-111d068a7e61":{"role":"reader","value":{"id":"b3a67a77-c28e-46bd-9cbe-111d068a7e61","version":3,"type":"sub_header","properties":{"title":[["Features of a message queue",[["b"]]]]},"created_time":1646296208855,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"caea4979-b330-4d67-95e5-fdbe7c9e5156":{"role":"reader","value":{"id":"caea4979-b330-4d67-95e5-fdbe7c9e5156","version":2,"type":"text","properties":{"title":[["Message queues facilitate asynchronous behavior. We have already learned what asynchronous behavior is in the AJAX lesson. Asynchronous behavior allows the modules to communicate in the background without hindering their primary tasks."]]},"created_time":1646296208855,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"b8dd45be-0314-4fb2-bdc6-8f998f7e174b":{"role":"reader","value":{"id":"b8dd45be-0314-4fb2-bdc6-8f998f7e174b","version":2,"type":"text","properties":{"title":[["Message queues facilitate cross-module communication, which is key in service-oriented and microservices architecture. They enable communication in a heterogeneous environment, providing temporary storage for storing messages until they are processed and consumed by the consumer."]]},"created_time":1646296208855,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"6509f7f8-9960-4b4e-9cd2-1a598e8455b9":{"role":"reader","value":{"id":"6509f7f8-9960-4b4e-9cd2-1a598e8455b9","version":2,"type":"text","properties":{"title":[["Let’s look at a real-world example to understand message queues."]]},"created_time":1646296208855,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"11043d00-2b11-4b5e-8f12-3f5cd62884aa":{"role":"reader","value":{"id":"11043d00-2b11-4b5e-8f12-3f5cd62884aa","version":3,"type":"sub_header","properties":{"title":[["Real-world example of a message queue",[["b"]]]]},"created_time":1646296208855,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"edad8d00-6f3a-4371-8887-7dcae9695134":{"role":"reader","value":{"id":"edad8d00-6f3a-4371-8887-7dcae9695134","version":2,"type":"text","properties":{"title":[["Take an email service as an example. Both the sender and receiver of the email don’t have to be online at the same time to communicate with each other. The sender sends an email, and the message is temporarily stored on the message server until the recipient comes online and reads the message."]]},"created_time":1646296208855,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"3303b049-8588-46c2-a178-554b0fbe1b05":{"role":"reader","value":{"id":"3303b049-8588-46c2-a178-554b0fbe1b05","version":2,"type":"text","properties":{"title":[["Message queues enable us to run background processes, tasks, and batch jobs. Speaking of background processes, let’s understand this better with the help of a use case."]]},"created_time":1646296208855,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"17410510-c0e6-4b32-a7a8-55880722a674":{"role":"reader","value":{"id":"17410510-c0e6-4b32-a7a8-55880722a674","version":2,"type":"text","properties":{"title":[["Think of a user signing up on a portal. After they sign up, they are immediately allowed to navigate to the application’s homepage, but the sign-up process isn’t complete yet. The system has to send a confirmation email to the user’s registered email id. Then, the user has to click on the confirmation email to confirm the sign-up event."]]},"created_time":1646296208855,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"6789d48c-bedd-4d24-b8db-14bcd74e9c1d":{"role":"reader","value":{"id":"6789d48c-bedd-4d24-b8db-14bcd74e9c1d","version":2,"type":"text","properties":{"title":[["However, the website cannot keep the user waiting until it sends the email to the user. They are immediately allowed to navigate to the application’s home page to avert them from bouncing off."]]},"created_time":1646296208855,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"1a6baa3d-2592-46bf-b6fc-3613aaa0f002":{"role":"reader","value":{"id":"1a6baa3d-2592-46bf-b6fc-3613aaa0f002","version":2,"type":"text","properties":{"title":[["So, the task of sending a sign-up confirmation email to the user is assigned as an asynchronous background process to a message queue. It sends an email while the user continues to browse the website."]]},"created_time":1646296208855,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"a817aa1b-d782-4fb1-b608-9237e500c8cd":{"role":"reader","value":{"id":"a817aa1b-d782-4fb1-b608-9237e500c8cd","version":2,"type":"text","properties":{"title":[["This is how message queues are leveraged to add asynchronous behavior to an application. Message queues are also used to implement notification systems similar to Facebook notifications. I’ll discuss this in the upcoming lessons."]]},"created_time":1646296208855,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"8fac8140-f6b5-4f89-a050-4eb092bc9b0e":{"role":"reader","value":{"id":"8fac8140-f6b5-4f89-a050-4eb092bc9b0e","version":2,"type":"text","properties":{"title":[["Moving on to the batch jobs."]]},"created_time":1646296208855,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"b8740dfe-63c6-4a56-8d33-c151c19c49bf":{"role":"reader","value":{"id":"b8740dfe-63c6-4a56-8d33-c151c19c49bf","version":2,"type":"sub_header","properties":{"title":[["Message queue in running batch jobs",[["b"]]],["#",[["b"],["a","https://www.educative.io/module/lesson/web-application-architecture-101/g2qWZ5MklPl#Message-queue-in-running-batch-jobs"]]]]},"created_time":1646296208855,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"0903d536-224f-48ae-b2d4-35ce5a8c89a2":{"role":"reader","value":{"id":"0903d536-224f-48ae-b2d4-35ce5a8c89a2","version":2,"type":"text","properties":{"title":[["Do you remember the stock market game use case from the caching lesson where I discussed how I leveraged a cache to reduce application hosting costs?"]]},"created_time":1646296208855,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"3d4291c2-a5a4-4437-8c96-07ad0dd13697":{"role":"reader","value":{"id":"3d4291c2-a5a4-4437-8c96-07ad0dd13697","version":2,"type":"text","properties":{"title":[["The batch job, which updated the stock prices at regular intervals in the database, was run by a message queue."]]},"created_time":1646296208855,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"3deabe62-f787-496b-88db-cce68c617be2":{"role":"reader","value":{"id":"3deabe62-f787-496b-88db-cce68c617be2","version":2,"type":"text","properties":{"title":[["So, we now know what a message queue is and why we use it in applications. In a message queue, there is a message sender called the producer, and there is a message receiver called the consumer."]]},"created_time":1646296208856,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"aad2ff60-a4dd-4fb0-b88a-8f6e82ffca27":{"role":"reader","value":{"id":"aad2ff60-a4dd-4fb0-b88a-8f6e82ffca27","version":2,"type":"text","properties":{"title":[["Both the producer and the consumer don’t have to reside on the same machine to communicate. This is pretty obvious."]]},"created_time":1646296208856,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"7182084c-17a4-4767-9758-b828c62443b1":{"role":"reader","value":{"id":"7182084c-17a4-4767-9758-b828c62443b1","version":2,"type":"text","properties":{"title":[["While routing messages through the queue, we can define several rules based on our business requirements. Adding priority to the messages is one that I pointed out. Other essential queuing features include message acknowledgments, retrying failed messages, etc."]]},"created_time":1646296208856,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"127862fd-ec7e-4f10-8736-57e80b7b8c87":{"role":"reader","value":{"id":"127862fd-ec7e-4f10-8736-57e80b7b8c87","version":2,"type":"text","properties":{"title":[["Speaking of the size of the queue, how big can it get, how many messages it can contain? Well, there is no definite size to it, and it can be an infinite buffer, considering the business has unlimited resources to run its infrastructure."]]},"created_time":1646296208856,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"be296cdb-f238-4410-8192-2c33d942fc99":{"role":"reader","value":{"id":"be296cdb-f238-4410-8192-2c33d942fc99","version":2,"type":"text","properties":{"title":[["Now, let’s look into the messaging models widely used in the industry, beginning with the publish-subscribe message routing model, which is responsible for how we consume information at large."]]},"created_time":1646296208856,"last_edited_time":1646296200000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"9cee0816-50ff-4964-8309-386822e689c9":{"role":"reader","value":{"id":"9cee0816-50ff-4964-8309-386822e689c9","version":4,"type":"header","properties":{"title":[["Publish-Subscribe Model",[["b"]]]]},"created_time":1646296418471,"last_edited_time":1646296380000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"4a922ef6-a24c-429d-a454-3bfdfdd6b4d3":{"role":"reader","value":{"id":"4a922ef6-a24c-429d-a454-3bfdfdd6b4d3","version":2,"type":"quote","properties":{"title":[["A publish-subscribe model, aka pub-sub, is a model that enables a single or multiple producers to broadcast messages to multiple consumers."]]},"created_time":1646296418471,"last_edited_time":1646296380000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"2e9619bd-6abf-4a69-8e04-c3825e9853ca":{"role":"reader","value":{"id":"2e9619bd-6abf-4a69-8e04-c3825e9853ca","version":2,"type":"text","properties":{"title":[["A good analogy of this model is a newspaper service. Consumers subscribe to a newspaper service, and the service delivers the news to multiple consumers of its service every single day."]]},"created_time":1646296418472,"last_edited_time":1646296380000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"4e4e568b-7e27-46e9-9708-61c0dbe95e03":{"role":"reader","value":{"id":"4e4e568b-7e27-46e9-9708-61c0dbe95e03","version":2,"type":"text","properties":{"title":[["In the online world, we often subscribe to various topics, such as sports, politics, economics, etc., in applications to be continually notified of the latest updates on that particular segment."]]},"created_time":1646296418472,"last_edited_time":1646296380000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"71a9dc5e-4d28-4564-b6f5-6fa7d1761a1a":{"role":"reader","value":{"id":"71a9dc5e-4d28-4564-b6f5-6fa7d1761a1a","version":4,"type":"sub_header","properties":{"title":[["Exchanges",[["b"]]]]},"created_time":1646296418472,"last_edited_time":1646296440000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"782cf097-cd25-4946-a336-cfa428502926":{"role":"reader","value":{"id":"782cf097-cd25-4946-a336-cfa428502926","version":2,"type":"text","properties":{"title":[["To implement the pub-sub pattern, message queues have exchanges that push the messages to the message queues based on the exchange type and the set rules. Exchanges here are just like telephone exchanges that route messages from the sender to the receiver through the infrastructure based on certain logic."]]},"created_time":1646296418472,"last_edited_time":1646296380000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"4e795428-ceff-445e-bd7b-7ec786f0ff3f":{"role":"reader","value":{"id":"4e795428-ceff-445e-bd7b-7ec786f0ff3f","version":9,"type":"image","properties":{"size":[["230.5KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4a4159b6-1af1-415f-993e-96f05df2b94d/Untitled.png"]]},"format":{"block_width":1055,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4a4159b6-1af1-415f-993e-96f05df2b94d/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.5734597156398105,"block_preserve_scale":true},"created_time":1646296440000,"last_edited_time":1646296440000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"file_ids":["4a4159b6-1af1-415f-993e-96f05df2b94d"],"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"d0ad2fd0-b14b-47ef-92c2-c0faf36067d0":{"role":"reader","value":{"id":"d0ad2fd0-b14b-47ef-92c2-c0faf36067d0","version":4,"type":"text","properties":{"title":[["There are different types of exchanges available in message queues, some of which are: "],["direct, topic, headers, and fanout",[["b"]]],[". Each exchange type has specific functionality and a use case."]]},"created_time":1646296418472,"last_edited_time":1646296500000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"8f4af032-e56c-4e72-8a77-a4d53275a746":{"role":"reader","value":{"id":"8f4af032-e56c-4e72-8a77-a4d53275a746","version":2,"type":"text","properties":{"title":[["Different message queue technologies have different implementations of exchange types. I just brought up the commonly used exchange types in message queues."]]},"created_time":1646296418472,"last_edited_time":1646296380000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"dc102aee-edfe-4321-9353-0e62d4840294":{"role":"reader","value":{"id":"dc102aee-edfe-4321-9353-0e62d4840294","version":4,"type":"text","properties":{"title":[["The "],["fanout exchange will fit best for implementing a pub-sub pattern. It will push the messages to the queue and the consumers will receive the message broadcast.",[["b"]]],[" The relationship between the exchange and the queue is known as binding."]]},"created_time":1646296418472,"last_edited_time":1646296500000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"52a69926-0097-4613-92f1-4298fed852b7":{"role":"reader","value":{"id":"52a69926-0097-4613-92f1-4298fed852b7","version":2,"type":"text","properties":{"title":[["Message queues and publish-subscribe pattern are responsible for delivering real-time news, updates, notifications on social apps to the end-users. The end-users follow certain pages, and they start receiving updates on the content published by those pages continually."]]},"created_time":1646296418472,"last_edited_time":1646296380000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"b7bf8249-97ee-4dc3-8412-ba95742efa10":{"role":"reader","value":{"id":"b7bf8249-97ee-4dc3-8412-ba95742efa10","version":4,"type":"header","properties":{"title":[["Point-to-Point Model",[["b"]]]]},"created_time":1646296561826,"last_edited_time":1646296560000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"2079c0b0-25e8-4829-ae0f-d610dc483733":{"role":"reader","value":{"id":"2079c0b0-25e8-4829-ae0f-d610dc483733","version":2,"type":"quote","properties":{"title":[["In a point-to-point model, a message from the producer is consumed by only one consumer."]]},"created_time":1646296561826,"last_edited_time":1646296560000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"4b55c3ec-63c3-4915-86cb-d22b6c8e5039":{"role":"reader","value":{"id":"4b55c3ec-63c3-4915-86cb-d22b6c8e5039","version":2,"type":"text","properties":{"title":[["It’s like a one-to-one relationship, while a publish-subscribe model is a one-to-many relationship."]]},"created_time":1646296561826,"last_edited_time":1646296560000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"9fe6c496-481f-4c5a-a2c1-ff57270e959b":{"role":"reader","value":{"id":"9fe6c496-481f-4c5a-a2c1-ff57270e959b","version":2,"type":"text","properties":{"title":[["Though based on the business requirements, we can set up multiple combinations in this messaging model, including adding multiple producers and consumers to a queue. However, only one consumer will consume a message sent by the producer. This is why this model is called a point-to-point queuing model. It’s not a broadcast of messages rather an entity to entity communication."]]},"created_time":1646296561826,"last_edited_time":1646296560000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"eed9ef1c-d9ae-41b1-bd22-9dae03bb39a3":{"role":"reader","value":{"id":"eed9ef1c-d9ae-41b1-bd22-9dae03bb39a3","version":3,"type":"sub_header","properties":{"title":[["Messaging protocols",[["b"]]]]},"created_time":1646296561826,"last_edited_time":1646296560000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"08e8921b-02b1-4afc-b730-c3ff1105741b":{"role":"reader","value":{"id":"08e8921b-02b1-4afc-b730-c3ff1105741b","version":3,"type":"text","properties":{"title":[["There are two popular protocols when working with message queues: A"],["MQP Advanced Message Queue Protocol and STOMP Simple or Streaming Text Oriented Message Protocol.",[["b"]]]]},"created_time":1646296561826,"last_edited_time":1646296560000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"74fd8876-18bc-4c3c-943a-2a55b985ad8c":{"role":"reader","value":{"id":"74fd8876-18bc-4c3c-943a-2a55b985ad8c","version":2,"type":"text","properties":{"title":[["Since they are protocols, I won’t be delving into them further. Every messaging technology, RabbitMQ, ActiveMQ, Apache Kafka, will have its own implementations of these protocols."]]},"created_time":1646296561827,"last_edited_time":1646296560000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"93645dea-cf26-4ccb-bf04-c4962702e2d4":{"role":"reader","value":{"id":"93645dea-cf26-4ccb-bf04-c4962702e2d4","version":3,"type":"header","properties":{"title":[["Notification Systems and Real-Time Feeds with Message Queues",[["b"]]]]},"created_time":1646296624194,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"47478dc5-0469-4b2d-ad06-2f7f757b83c4":{"role":"reader","value":{"id":"47478dc5-0469-4b2d-ad06-2f7f757b83c4","version":2,"type":"text","properties":{"title":[["This is the part where you get an insight into how notification systems and real-time feeds are designed with the help of message queues."]]},"created_time":1646296624194,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"327fedbd-f1e9-419a-8fd2-832625d69eb7":{"role":"reader","value":{"id":"327fedbd-f1e9-419a-8fd2-832625d69eb7","version":2,"type":"text","properties":{"title":[["Folks! Notification systems and real-time feed are complex modules in today’s modern Web 2.0 applications. They involve a lot of tasks such as understanding user behavior, recommending new and relevant content to the users on the platform, ingesting data from different sources, matching user behaviour with that data, and so on. They also leverage machine learning in order to be more effective."]]},"created_time":1646296624194,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"cef0f90f-1540-4432-9da6-4c9722c47389":{"role":"reader","value":{"id":"cef0f90f-1540-4432-9da6-4c9722c47389","version":2,"type":"text","properties":{"title":[["We won’t get into that level of complexity simply because it’s not required. I present a very simple use case to wrap our heads around it."]]},"created_time":1646296624194,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"5dfefc34-f436-4823-b333-7db9a1354475":{"role":"reader","value":{"id":"5dfefc34-f436-4823-b333-7db9a1354475","version":2,"type":"text","properties":{"title":[["Also, as I discuss this use case, I need you to think how you would do it if you were to design such a notification system from the bare bones. This will help you understand the concept better."]]},"created_time":1646296624194,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"93106a6e-338e-401e-9b7d-de5090580362":{"role":"reader","value":{"id":"93106a6e-338e-401e-9b7d-de5090580362","version":2,"type":"text","properties":{"title":[["With that being said, let’s get on with it."]]},"created_time":1646296624194,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"83caf2e0-bada-4326-a0db-3808a258ed95":{"role":"reader","value":{"id":"83caf2e0-bada-4326-a0db-3808a258ed95","version":4,"type":"sub_header","properties":{"title":[["Notification system - use case",[["b"]]]]},"created_time":1646296624194,"last_edited_time":1646296680000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"d345bd5f-1d1b-477f-b982-1f8912464723":{"role":"reader","value":{"id":"d345bd5f-1d1b-477f-b982-1f8912464723","version":2,"type":"text","properties":{"title":[["Imagine building a social network like Facebook using a relational database. A message queue is required to add asynchronous behavior to our application."]]},"created_time":1646296624195,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"ab722e29-801d-495b-afaa-e9e78f9e26f6":{"role":"reader","value":{"id":"ab722e29-801d-495b-afaa-e9e78f9e26f6","version":2,"type":"text","properties":{"title":[["In the application, a user will have many friends and followers. This is a many-to-many relationship, like a social graph. One user has many friends, and they would be friends of many users."]]},"created_time":1646296624195,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"3639af86-95b6-443f-8de9-f88c22246ca2":{"role":"reader","value":{"id":"3639af86-95b6-443f-8de9-f88c22246ca2","version":2,"type":"text","properties":{"title":[["So, when a user creates a post on the website, the application will persist it in the database. There will be one User table and another Post table. Since one user will create many posts, it will be a one-to-many relationship between the user and their posts."]]},"created_time":1646296624199,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"e633ac08-5e14-462e-b583-561a4a01b4ab":{"role":"reader","value":{"id":"e633ac08-5e14-462e-b583-561a4a01b4ab","version":9,"type":"image","properties":{"size":[["288.0KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2eff034e-2de6-4592-8b1b-a499d7e96453/Untitled.png"]]},"format":{"block_width":1025,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2eff034e-2de6-4592-8b1b-a499d7e96453/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.6263414634146341,"block_preserve_scale":true},"created_time":1646296740000,"last_edited_time":1646296740000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"file_ids":["2eff034e-2de6-4592-8b1b-a499d7e96453"],"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"5b7cf2af-7eb8-4361-a49c-b97298200db2":{"role":"reader","value":{"id":"5b7cf2af-7eb8-4361-a49c-b97298200db2","version":2,"type":"text","properties":{"title":[["As we persist the post in the database, we also have to show the information posted by the user on the home page of their friends and followers, even send notifications if needed."]]},"created_time":1646296624199,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"649eb99b-b2b8-4c8f-a905-fa6344dc421e":{"role":"reader","value":{"id":"649eb99b-b2b8-4c8f-a905-fa6344dc421e","version":2,"type":"text","properties":{"title":[["How would you implement this? Pause and think before you read further."]]},"created_time":1646296624199,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"0fe4143e-ed84-4205-a319-4a7ea5648df0":{"role":"reader","value":{"id":"0fe4143e-ed84-4205-a319-4a7ea5648df0","version":4,"type":"sub_header","properties":{"title":[["Pull-based approach",[["b"]]]]},"created_time":1646296624199,"last_edited_time":1646296740000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"faf7a621-ee3e-47c9-8d6c-8e746ff687c3":{"role":"reader","value":{"id":"faf7a621-ee3e-47c9-8d6c-8e746ff687c3","version":4,"type":"text","properties":{"title":[["One straightforward way to implement this without the message queue will be to have every user on the website "],["poll the database at regular short intervals",[["b"]]],[" if any of their connections have a new update."]]},"created_time":1646296624199,"last_edited_time":1646296740000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"edf6769d-22fc-48c6-a338-30f2af8ada88":{"role":"reader","value":{"id":"edf6769d-22fc-48c6-a338-30f2af8ada88","version":2,"type":"text","properties":{"title":[["For this, for showing notifications on a certain user profile, we will query all the connections of the user from the database and then run a check on every connection one by one if any new information is posted by them."]]},"created_time":1646296624199,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"6394c425-0960-40ff-a5e4-e3dc1761b16a":{"role":"reader","value":{"id":"6394c425-0960-40ff-a5e4-e3dc1761b16a","version":2,"type":"text","properties":{"title":[["If there are new posts created by the user’s connections, the query will pull them all and display the posts on the home page of the user’s profile. We can also send the notifications to the user about the new posts, tracking them with the help of a boolean notification counter column in the User table and adding an extra AJAX poll query from the client for new notifications."]]},"created_time":1646296624199,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"c63f509a-caa9-4582-8cac-3af4c38ef3e8":{"role":"reader","value":{"id":"c63f509a-caa9-4582-8cac-3af4c38ef3e8","version":2,"type":"text","properties":{"title":[["Whenever the database query finds new posts, it changes the new notification counter to true. When the counter is true, responding to the Ajax poll request, the application sends a notification to the user that you have recent posts made by your connections."]]},"created_time":1646296624200,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"f6a20040-6aaf-431b-aeff-df12dc363dfb":{"role":"reader","value":{"id":"f6a20040-6aaf-431b-aeff-df12dc363dfb","version":9,"type":"image","properties":{"size":[["394.4KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/05b2e096-9b9d-4767-b749-ca60fe7ef9d3/Untitled.png"]]},"format":{"block_width":1053,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/05b2e096-9b9d-4767-b749-ca60fe7ef9d3/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.6258309591642925,"block_preserve_scale":true},"created_time":1646296740000,"last_edited_time":1646296740000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"file_ids":["05b2e096-9b9d-4767-b749-ca60fe7ef9d3"],"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"63d12766-379f-427d-ba1f-7c72ea4e1704":{"role":"reader","value":{"id":"63d12766-379f-427d-ba1f-7c72ea4e1704","version":2,"type":"text","properties":{"title":[["What do you think of this approach? It’s pretty straightforward, right?"]]},"created_time":1646296624200,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"a00a65b2-e272-4143-a231-bf40874c3e24":{"role":"reader","value":{"id":"a00a65b2-e272-4143-a231-bf40874c3e24","version":2,"type":"text","properties":{"title":[["Well, there are two major downsides to this approach."]]},"created_time":1646296624200,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"3670145f-e4c8-48bd-bd64-303d69057343":{"role":"reader","value":{"id":"3670145f-e4c8-48bd-bd64-303d69057343","version":4,"type":"text","properties":{"title":[["First, we are polling the database so often. This is expensive. It will c"],["onsume a lot of bandwidth and put a lot of unnecessary load on the database",[["b"]]],["."]]},"created_time":1646296624200,"last_edited_time":1646296800000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"0b99f064-0365-4eb8-84c7-fef89561a2b0":{"role":"reader","value":{"id":"0b99f064-0365-4eb8-84c7-fef89561a2b0","version":4,"type":"text","properties":{"title":[["The second downside is that a user’s post displayed on the home page of their connection’s homepage will "],["not be in real-time",[["b"]]],[". The posts won’t show until the database is polled. We may assume this as real-time, but it is not really real-time."]]},"created_time":1646296624200,"last_edited_time":1646296800000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"1947b7b7-fd89-4b68-8a0a-fd8f906a81f2":{"role":"reader","value":{"id":"1947b7b7-fd89-4b68-8a0a-fd8f906a81f2","version":4,"type":"sub_header","properties":{"title":[["Push-based approach",[["b"]]]]},"created_time":1646296624200,"last_edited_time":1646296800000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"bbb9b434-591a-4cb3-8bf7-f9a3f6fa0bdf":{"role":"reader","value":{"id":"bbb9b434-591a-4cb3-8bf7-f9a3f6fa0bdf","version":2,"type":"text","properties":{"title":[["Let’s make our system more performant. Instead of polling the database now and then, we will take the help of a message queue."]]},"created_time":1646296624200,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"6504ab15-6f65-495a-974b-e5ab245658e0":{"role":"reader","value":{"id":"6504ab15-6f65-495a-974b-e5ab245658e0","version":2,"type":"text","properties":{"title":[["In this scenario, when a user creates a new post, it will have a distributed transaction. One transaction will update the database, and the other will send the post payload to the message queue. Payload means the content of the message posted by the user."]]},"created_time":1646296624200,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"f9d3ec95-a2ad-4d9b-ac5c-a8fa45ac548d":{"role":"reader","value":{"id":"f9d3ec95-a2ad-4d9b-ac5c-a8fa45ac548d","version":2,"type":"text","properties":{"title":[["Notification systems and real-time feeds establish a persistent connection with the database to facilitate streaming data in real-time. We have already been through this."]]},"created_time":1646296624200,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"50dbe57e-d8cb-4e8f-9dff-c29c125efe63":{"role":"reader","value":{"id":"50dbe57e-d8cb-4e8f-9dff-c29c125efe63","version":4,"type":"text","properties":{"title":[["On receiving the message, the "],["message queue will asynchronously and immediately push the post to the user’s connections that are online",[["b"]]],[". There is no need for them to poll the database regularly to check if any of their connections have created a post."]]},"created_time":1646296624200,"last_edited_time":1646296860000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"e3349772-ba6a-4e11-bd22-2ae7be5dc81a":{"role":"reader","value":{"id":"e3349772-ba6a-4e11-bd22-2ae7be5dc81a","version":9,"type":"image","properties":{"size":[["252.7KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/102f1ba9-b1cb-4bc1-a5e1-60458b9ea9ef/Untitled.png"]]},"format":{"block_width":1043,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/102f1ba9-b1cb-4bc1-a5e1-60458b9ea9ef/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.5618408437200384,"block_preserve_scale":true},"created_time":1646296800000,"last_edited_time":1646296860000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"file_ids":["102f1ba9-b1cb-4bc1-a5e1-60458b9ea9ef"],"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"8919c4aa-14bc-48e9-887d-415945e520ba":{"role":"reader","value":{"id":"8919c4aa-14bc-48e9-887d-415945e520ba","version":2,"type":"text","properties":{"title":[["We can also use the message queue temporary storage with a TTL for storing the payload until the connections of the user come online and then push the updates to them. We can also have a separate key-value database to store the user’s details required to push the notifications to their connections, like their connection list and stuff. This would avert the need to poll the database to get the connections of the user every time the user creates a post."]]},"created_time":1646296624200,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"24af6dff-1cf5-4b37-a6e8-77ddc5b7fffe":{"role":"reader","value":{"id":"24af6dff-1cf5-4b37-a6e8-77ddc5b7fffe","version":2,"type":"text","properties":{"title":[["So, did you see how we transitioned from a pull-based approach to a push-based approach with the help of message queues? This shift will spike the application’s performance and cut down a lot of resource consumption, saving truckloads of our hard-earned money."]]},"created_time":1646296624200,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"a7c88738-73f9-470a-b4ee-703e36c6762d":{"role":"reader","value":{"id":"a7c88738-73f9-470a-b4ee-703e36c6762d","version":9,"type":"image","properties":{"size":[["460.1KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3bb2dee6-0694-42cb-bead-e3cb36b2854d/Untitled.png"]]},"format":{"block_width":1059,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3bb2dee6-0694-42cb-bead-e3cb36b2854d/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.667610953729934,"block_preserve_scale":true},"created_time":1646296920000,"last_edited_time":1646296920000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"file_ids":["3bb2dee6-0694-42cb-bead-e3cb36b2854d"],"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"e8c4f128-f11c-40aa-a0a7-5a7e7e137848":{"role":"reader","value":{"id":"e8c4f128-f11c-40aa-a0a7-5a7e7e137848","version":2,"type":"text","properties":{"title":[["There are several ways we can handle distributed transactions. Though the transactions are distributed, they can still work as a single unit. In case the database persistence fails, the application will roll back the entire transaction. There won’t be any message push to the message queue either."]]},"created_time":1646296624200,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"e14d9e87-69ba-4437-b25b-c27c688c4d48":{"role":"reader","value":{"id":"e14d9e87-69ba-4437-b25b-c27c688c4d48","version":2,"type":"text","properties":{"title":[["What if the message queue push fails? And the database transaction succeeds? Do you want to roll back the transaction, or do you want to proceed? The decision depends entirely on you, how you want your system to behave."]]},"created_time":1646296624200,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"edc840ad-555c-46b9-9eaf-7258ad5d9507":{"role":"reader","value":{"id":"edc840ad-555c-46b9-9eaf-7258ad5d9507","version":2,"type":"text","properties":{"title":[["Even if the message queue push fails, the message isn’t lost. It can still be persisted in the database."]]},"created_time":1646296624200,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"b88b1540-76b5-4eef-b127-ef26213dd32b":{"role":"reader","value":{"id":"b88b1540-76b5-4eef-b127-ef26213dd32b","version":4,"type":"text","properties":{"title":[["When the user refreshes their homepage, you can write a query to poll the database for the new updates, taking the polling approach we discussed initially as a backup.",[["b"]]]]},"created_time":1646296624201,"last_edited_time":1646297160000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"d3af290c-b36c-480e-8fb6-20a80e15e5e0":{"role":"reader","value":{"id":"d3af290c-b36c-480e-8fb6-20a80e15e5e0","version":4,"type":"text","properties":{"title":[["Or you can totally roll back the transaction, even if the database persistence transaction is a success but the message queue push transaction fails.",[["b"]]],[" The post hasn’t gone into the database yet as it is generally a two-phase commit."]]},"created_time":1646296624201,"last_edited_time":1646297160000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"c87fc7d9-15ff-4e1b-8b76-3c5bfb0a2ca2":{"role":"reader","value":{"id":"c87fc7d9-15ff-4e1b-8b76-3c5bfb0a2ca2","version":2,"type":"text","properties":{"title":[["We can always write custom code to manage the distributed transactions or can choose to leverage the distributed transaction managers that the frameworks offer."]]},"created_time":1646296624201,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"86ce8217-5e7f-446b-bf5c-f46ef7b81848":{"role":"reader","value":{"id":"86ce8217-5e7f-446b-bf5c-f46ef7b81848","version":2,"type":"text","properties":{"title":[["I can keep going on to the minutest of the details, but that would just make the lesson unnecessarily lengthy, complex and overkill. For now, I have just touched the surface of notification modules to help you understand how they work."]]},"created_time":1646296624201,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"76da0a89-59e0-4fbb-973d-4d03ff0022cb":{"role":"reader","value":{"id":"76da0a89-59e0-4fbb-973d-4d03ff0022cb","version":2,"type":"text","properties":{"title":[["Post creation is an event that a user triggers in the application. Similar events are liking a post, photo, video, watching a live-stream and so on."]]},"created_time":1646296624201,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"068576f4-d29d-4b2a-a0c0-6d5f49a389ed":{"role":"reader","value":{"id":"068576f4-d29d-4b2a-a0c0-6d5f49a389ed","version":2,"type":"text","properties":{"title":[["Just like posts, message queues can push these events too to the connections of a user."]]},"created_time":1646296624201,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"57f1bceb-a967-43ef-8ce9-11c4ead1dcf3":{"role":"reader","value":{"id":"57f1bceb-a967-43ef-8ce9-11c4ead1dcf3","version":2,"type":"text","properties":{"title":[["When designing systems, I want to emphasize that there is no perfect or best solution. The solution should serve us well, fulfilling our business requirements and simultaneously maintaining costs. Application maintenance and optimization are evolutionary, don’t sweat about it in the initial development cycles."]]},"created_time":1646296624201,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"e698e60d-bb36-4656-8924-a5e1ef2e4488":{"role":"reader","value":{"id":"e698e60d-bb36-4656-8924-a5e1ef2e4488","version":2,"type":"text","properties":{"title":[["First, get the skeleton in place and then optimize notch by notch."]]},"created_time":1646296624201,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"4d08d027-b244-4286-b7e0-7bf568bba7f3":{"role":"reader","value":{"id":"4d08d027-b244-4286-b7e0-7bf568bba7f3","version":2,"type":"text","properties":{"title":[["Recommended read",[["b"]]],[" - "],["How does LinkedIn identify its users online?",[["a","https://www.scaleyourapp.com/linkedin-real-time-architecture-how-does-linkedin-identify-its-users-online/"]]]]},"created_time":1646296624201,"last_edited_time":1646296620000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"c300023a-7043-49f4-8030-d1cabd83adfa":{"role":"reader","value":{"id":"c300023a-7043-49f4-8030-d1cabd83adfa","version":4,"type":"header","properties":{"title":[["Handling Concurrent Requests with Message Queues",[["b"]]]]},"created_time":1646297224279,"last_edited_time":1646297220000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"7ddbc124-7688-443b-a252-9be28ebdf805":{"role":"reader","value":{"id":"7ddbc124-7688-443b-a252-9be28ebdf805","version":3,"type":"sub_header","properties":{"title":[["Using a message queue to handle the traffic surge",[["b"]]]]},"created_time":1646297224280,"last_edited_time":1646297220000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"e1563536-909b-45b6-844b-e8ce1ee91722":{"role":"reader","value":{"id":"e1563536-909b-45b6-844b-e8ce1ee91722","version":2,"type":"text","properties":{"title":[["In the distributed NoSQL databases lesson, we learned about eventual consistency and strong consistency. We discussed how both the consistency models come into effect when incrementing a “Like” counter value."]]},"created_time":1646297224280,"last_edited_time":1646297220000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"883712b7-e99a-4e26-b402-cc2084ed5526":{"role":"reader","value":{"id":"883712b7-e99a-4e26-b402-cc2084ed5526","version":2,"type":"text","properties":{"title":[["Here is a quick insight into how we can use a message queue to manage a high number of concurrent requests to update an entity."]]},"created_time":1646297224280,"last_edited_time":1646297220000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"7f87f0ba-e57e-40dd-b2b7-1f8da42d5745":{"role":"reader","value":{"id":"7f87f0ba-e57e-40dd-b2b7-1f8da42d5745","version":4,"type":"text","properties":{"title":[["When millions of users around the world update an entity concurrently, we can queue all the update requests in a high throughput message queue. Then, we can process them one by one in a First in First Out (FIFO) approach sequentially.",[["b"]]]]},"created_time":1646297224280,"last_edited_time":1646297340000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"13b13194-86d9-452d-86f9-9aaa5f0ade38":{"role":"reader","value":{"id":"13b13194-86d9-452d-86f9-9aaa5f0ade38","version":2,"type":"text","properties":{"title":[["This would enable the system to be highly available and open to updates while remaining consistent at the same time."]]},"created_time":1646297224280,"last_edited_time":1646297220000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"262e17b9-1038-4e3e-939c-7429b2bd575b":{"role":"reader","value":{"id":"262e17b9-1038-4e3e-939c-7429b2bd575b","version":2,"type":"text","properties":{"title":[["Though implementing this approach is not as simple as it sounds, implementing anything in a distributed, real-time environment is not so trivial."]]},"created_time":1646297224280,"last_edited_time":1646297220000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"5887051d-01db-495b-9a84-542d9d6ab9df":{"role":"reader","value":{"id":"5887051d-01db-495b-9a84-542d9d6ab9df","version":4,"type":"sub_header","properties":{"title":[["Facebook handles concurrent requests on its live video streaming service with a message queue",[["b"]]]]},"created_time":1646297224280,"last_edited_time":1646297340000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"975c4533-5f79-47e6-a32c-808783e34b5f":{"role":"reader","value":{"id":"975c4533-5f79-47e6-a32c-808783e34b5f","version":2,"type":"text","properties":{"title":[["Facebook’s approach of handling concurrent user requests on its LIVE video streaming service is another good example of how queues can be used to efficiently handle the traffic surge."]]},"created_time":1646297224280,"last_edited_time":1646297220000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"2641aabd-8cfa-4ca3-9c26-13a3ce78a358":{"role":"reader","value":{"id":"2641aabd-8cfa-4ca3-9c26-13a3ce78a358","version":2,"type":"text","properties":{"title":[["On the platform, when a popular person goes LIVE, there is a surge of user requests on the LIVE streaming server. To avert the incoming load on the server, Facebook uses cache to intercept the traffic."]]},"created_time":1646297224280,"last_edited_time":1646297220000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"c586ed87-8a9a-4ef6-a875-25a34aa65c8e":{"role":"reader","value":{"id":"c586ed87-8a9a-4ef6-a875-25a34aa65c8e","version":2,"type":"text","properties":{"title":[["However, since the data is streamed LIVE, the cache often is not populated with real-time data before the requests arrive. Now, this would naturally result in a cache-miss, and the requests would move on to hit the streaming server."]]},"created_time":1646297224280,"last_edited_time":1646297220000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"bef01f60-0d9d-4e29-bf2f-12a494423f61":{"role":"reader","value":{"id":"bef01f60-0d9d-4e29-bf2f-12a494423f61","version":4,"type":"text","properties":{"title":[["To avert this, "],["Facebook queues all the user requests, requesting the same data. It fetches the data from the streaming server, populates the cache, and then serves the queued requests from the cache.",[["b"]]]]},"created_time":1646297224280,"last_edited_time":1646297400000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"eea0c4e0-8053-4026-9799-7afa4a06ac95":{"role":"reader","value":{"id":"eea0c4e0-8053-4026-9799-7afa4a06ac95","version":2,"type":"text","properties":{"title":[["Here is a recommended read on "],["Facebook’s Live streaming architecture",[["a","https://engineering.fb.com/2015/12/03/ios/under-the-hood-broadcasting-live-video-to-millions/"]]],["."]]},"created_time":1646297224280,"last_edited_time":1646297220000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"678fafab-8468-410f-b299-199c869c642a":{"role":"reader","value":{"id":"678fafab-8468-410f-b299-199c869c642a","version":4,"type":"text","created_time":1646297224280,"last_edited_time":1646297400000,"parent_id":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","last_edited_by_table":"notion_user","last_edited_by_id":"9e9c4442-4350-473a-b900-c954b0bd7a95","space_id":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}}},"space":{},"discussion":{},"comment":{},"collection":{},"collection_view":{},"notion_user":{},"collection_query":{},"signed_urls":{"4e795428-ceff-445e-bd7b-7ec786f0ff3f":"https://s3.us-west-2.amazonaws.com/secure.notion-static.com/4a4159b6-1af1-415f-993e-96f05df2b94d/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\u0026X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220307%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20220307T063718Z\u0026X-Amz-Expires=86400\u0026X-Amz-Signature=d446f4c68a2ace543dadd4e26460fd6daa658bf99faa08642fa8c78bbb8eeac4\u0026X-Amz-SignedHeaders=host\u0026x-id=GetObject","e633ac08-5e14-462e-b583-561a4a01b4ab":"https://s3.us-west-2.amazonaws.com/secure.notion-static.com/2eff034e-2de6-4592-8b1b-a499d7e96453/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\u0026X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220307%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20220307T063718Z\u0026X-Amz-Expires=86400\u0026X-Amz-Signature=1506976675ed03d5e14271315c60c61e2857afd576f6bd83a5c5642fb32a398b\u0026X-Amz-SignedHeaders=host\u0026x-id=GetObject","f6a20040-6aaf-431b-aeff-df12dc363dfb":"https://s3.us-west-2.amazonaws.com/secure.notion-static.com/05b2e096-9b9d-4767-b749-ca60fe7ef9d3/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\u0026X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220307%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20220307T063718Z\u0026X-Amz-Expires=86400\u0026X-Amz-Signature=eeb340373ccc64e565d21bd108bce377375346e6235e666e8e11cdef059b08d9\u0026X-Amz-SignedHeaders=host\u0026x-id=GetObject","e3349772-ba6a-4e11-bd22-2ae7be5dc81a":"https://s3.us-west-2.amazonaws.com/secure.notion-static.com/102f1ba9-b1cb-4bc1-a5e1-60458b9ea9ef/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\u0026X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220307%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20220307T063718Z\u0026X-Amz-Expires=86400\u0026X-Amz-Signature=cc4299c27fe53376218b7104d9452a1fff58a838967bc94c518b0be5db0dcfdc\u0026X-Amz-SignedHeaders=host\u0026x-id=GetObject","a7c88738-73f9-470a-b4ee-703e36c6762d":"https://s3.us-west-2.amazonaws.com/secure.notion-static.com/3bb2dee6-0694-42cb-bead-e3cb36b2854d/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\u0026X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20220307%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20220307T063718Z\u0026X-Amz-Expires=86400\u0026X-Amz-Signature=a9e38024c7680e06db4017fab02771610e856b15cef9b9ef2a438446e7c961b0\u0026X-Amz-SignedHeaders=host\u0026x-id=GetObject"},"preview_images":{}},"pageId":"4318a0c0-5b84-42f4-aff1-9fc5a1e2244f"},"__N_SSG":true},"page":"/[pageId]","query":{"pageId":"message-queues"},"buildId":"P2-vwnI2t92OYaXL16i4K","assetPrefix":"/blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>